import"./modulepreload-polyfill-B5Qt9EMX.js";/* empty css              */import"./nav-DsJsjzAw.js";const d=document.getElementById("file-report"),e=document.getElementById("file-status"),i=document.getElementById("image"),n=document.getElementById("file-name"),c=document.getElementById("hosted-text");function g(t,l,o){t.preventDefault();const m=t.target.elements[0].files?.[0],a=new FormData;if(!m){console.log("No image");return}a.append("imageUpload",m),a.append("websiteName",l),a.append("apiKey",o),fetch("https://api.flik.host/upload.php",{method:"POST",body:a}).then(async r=>{const u=await r.text();if(!(!d||!c||!n||!e||!i)){d.classList.add("flex"),d.classList.remove("hidden");try{const s=JSON.parse(u);if(s.success){e.classList.contains("text-red-500")&&(e.classList.add("text-green-500"),e.classList.remove("text-red-500"),n.classList.remove("hidden"),i.classList.remove("hidden"),e.innerText="File uploaded sucessfully!",c.innerText="This image is now hosted on the flikhost website that I created!");let p=s.link.replace("api.",""),f=s.link.replace("https://api.flik.host/images/","");n.innerText=f,n.href=p,i.src=p}else console.log("Post failed",s),e.classList.remove("text-green-500"),e.classList.add("text-red-500"),e.innerText="File upload failed :\\",n.classList.add("hidden"),i.classList.add("hidden"),c.innerText=s.message}catch{console.log("Server error")}}}).catch(r=>{console.log(r)})}for(const t of document.querySelectorAll("img"))t.addEventListener("error",function(l){const o=l.target;o.src="NoImage.jpg",o.onerror=null}),t.complete&&t.naturalWidth===0&&t.dispatchEvent(new Event("error"));window.uploadImage=g;
